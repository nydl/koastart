!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),l=n(3);window.EditTable=function(){function e(t){r(this,e),this._editTx=null,this._keyDown=!1,this._selRow=null,this._editCell=null,this._editRow=null,this._editCursorPos=0}return a(e,[{key:"mouseupCell",value:function(e){var t=e||window.event;t.preventDefault()}},{key:"focusCell",value:function(){this._editTx&&(this._editCell||("SPAN"===this._editTx.tagName?l.cursorEnd(this._editTx):this._editTx.focus()))}},{key:"editCell",value:function(e,t){if(e){if(!t&&this._editCell&&e===this._editCell)return;if("INPUT"!==e.tagName&&"SPAN"!==e.tagName)return;this._editRow=l.upperTag(e,"TR"),this._editTx=e,this._selRow&&(this.setRowClass(this._selRow,""),this._selRow=null),"SPAN"===e.tagName?/^~~.+~~/.exec(e.innerHTML)&&(e.innerHTML=e.innerHTML.replace(/^~~.*~~/,"")):"INPUT"===e.tagName&&(l.className(this._editCell,""),l.className(e,"etCellEdit"),t||(e.focus(),e.select())),this._editCell=e}}},{key:"viewCell",value:function(e){if(e&&(!e.getAttribute("inputing")||"1"!==e.getAttribute("inputing"))){if("INPUT"===e.tagName)l.className(e,"etCellView");else if("SPAN"===e.tagName){var t=l.childTag(e.parentNode,"input"),n=e.innerHTML.replace(/^~~.*~~/,"");if(n=n.replace(/<br>/g,"\n"),n=n.replace(/&nbsp;/g," "),!n||/^[\s\n\r]+$/.exec(n)){if("imgTitle"===e.className?e.innerHTML="~~点击输入标题~~":e.innerHTML="~~点击输入~~",t){var r=l.childTag(t.parentNode,"img");r?t.value=(0,i.format)("![%s](%s)","",r.getAttribute("src")):t.value=""}}else if(t){var a=l.childTag(t.parentNode,"img");a?(n=l.trim(n.replace(/<br>|<div>|<\/div>/gi,"")),t.value=(0,i.format)("![%s](%s)",n||"",a.getAttribute("src"))):t.value=n}}this._editCell=null}}},{key:"setRowClass",value:function(e,t){e&&(t?l.className(e,t):l.className(e,""))}},{key:"readOnly",value:function(e,t,n){try{for(var r=l.tags(e,"TBODY")[0],a=l.tags(r,"INPUT"),i=0;i<a.length;i++)if("text"===a[i].type){a[i].readOnly=!n;for(var s=0;s<t.length;s++)a[i].name==="tx"+t[s]&&(a[i].readOnly=n)}}catch(o){alert(o.message)}}},{key:"hideCol",value:function(e,t){try{for(var n=0;n<t.length;n++){var r=l.id("th"+t[n]);r&&(r.style.display="none")}for(var a=l.tags(e,"TBODY")[0],i=l.tags(a,"INPUT"),s=0;s<i.length;s++)if("text"===i[s].type)for(var o=0;o<t.length;o++)if(i[s].name==="tx"+t[o]){var u=l.upperTag(i[s],"TD");u&&(u.style.display="none")}}catch(d){alert(d.message)}}},{key:"showCol",value:function(e,t){try{for(var n=0;n<t.length;n++){var r=l.id("th"+t[n]);r&&(r.style.display="")}for(var a=l.tags(e,"TBODY")[0],i=l.tags(a,"INPUT"),s=0;s<i.length;s++)if("text"===i[s].type)for(var o=0;o<t.length;o++)if(i[s].name==="tx"+t[o]){var u=l.upperTag(i[s],"TD");u&&(u.style.display="")}}catch(d){alert(d.message)}}},{key:"lightonRow",value:function(e){var t=l.upperTag(e,"TR");t&&t!==this._selRow&&(t.className.indexOf("Odd")>-1?this.setRowClass(t,"etRowSelOdd"):this.setRowClass(t,"etRowSelEven"),this.setRowClass(this._selRow,""),this._selRow=t)}},{key:"deleteData",value:function(e,t,n){for(var r=document.getElementsByName(t),a=1;a<r.length;a++)r[a].value===n&&(this.deleteRow(e,a),a--)}},{key:"selRow",value:function(e,t){if(e){var n=l.upperTag(e,"TR");if(n)if("TD"===e.tagName)n!==this._selRow&&(this._selRow=n);else{var r=l.upperTag(n,"TBODY"),a=r.parentNode,i=l.tags(a,"TH")[0];l.lastChild(l.firstChild(n)).value&&(l.lastChild(i).value=l.lastChild(i).value?l.lastChild(i).value+",":"",e.checked?l.lastChild(i).value+=l.lastChild(l.firstChild(n)).value:l.lastChild(i).value=l.lastChild(i).value.replace(l.lastChild(l.firstChild(n)).value+",",""))}}}},{key:"deleteRow",value:function(e,t){var n=0;if(!e)return 0;try{var r=l.tags(e,"TBODY")[0],a=l.tags(r,"TR");if(0===a.length)return;var i=null;if(i=e&&t?e.rows[t+1]:this._selRow,!i&&this._editRow&&(i=this._editRow),i||(i=a[a.length-1]),!i)return;this._selRow&&(this.setRowClass(this._selRow,""),this._selRow=null),this._editCell&&(l.className(this._editCell,""),this._editCell=null);var s=l.tags(e,"TH")[0];i.childElementCount>0&&l.lastChild(l.firstChild(i)).value&&(l.lastChild(s).value=l.lastChild(s).value?l.lastChild(s).value+",":"",l.lastChild(s).value+=l.lastChild(l.firstChild(i)).value),i===this._selRow&&(this._selRow=null),i===this._editRow&&(this._editRow=null,this._editTx=null);var o=i.previousSibling,u=l.tags(i,"span")[0];i.parentNode&&i.parentNode.removeChild(i),u&&(n=l.tags(r,"TR").length,n||(o=this.addRow(e,"~~点击输入~~"),n=1),o&&(u=l.tags(o,"span")[0],u&&l.cursorEnd(u)))}catch(d){console.error("deleteRow exp:"+d.message)}return n}},{key:"addRow",value:function(e,t,n){var r=l.tags(e,"THEAD")[0],a=l.lastChild(r).cloneNode(!0),i=l.tags(a,"span")[0];i&&(i.innerHTML=t||""),a.style.display="";var s=l.tags(r.parentNode,"TBODY")[0];return a=s.insertBefore(a,n||null),this._editRow=a,this._editTx=l.tags(a,"span")||l.tags(a,"input"),this._editTx&&(this._editTx=this._editTx[0]),this._selRow=a,this._editCell=null,a}},{key:"clearRow",value:function(e){if(!e)return void alert("请传入table对象！");for(var t=l.tags(e,"TBODY")[0];t.childNodes.length>0;)t.removeChild(t.childNodes[0])}},{key:"getNullRow",value:function(e){for(var t={row:null,cnt:0},n=null,r=0,a=0;a<e.childNodes.length;a++){var i=e.childNodes[a],s="";try{var o=l.firstChild(i.cells[1]);s="IMG"===o.tagName?"img":"SPAN"===o.tagName?l.trim(o.innerHTML):"INPUT"===o.tagName?l.trim(o.value):l.trim(o.nodeValue)}catch(u){console.error("getNullRow exp:"+u.message)}1!==i.nodeType||s||(r++,n||(n=i))}return n&&(t={row:n,cnt:r}),t}},{key:"setIdx",value:function(e,t){for(var n=0;n<e.length;n++){e[n].setAttribute("idx","");for(var r=0;r<t.length;r++)"INPUT"===e[n].tagName?e[n].name==="tx"+t[r]&&e[n].setAttribute("idx",r):e[n].getAttribute("name")==="tx"+t[r]&&e[n].setAttribute("idx",r)}}},{key:"setVal",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n].getAttribute("idx");if(null!==r&&""!==l.trim(r)&&!isNaN(r)&&(r=Number(r),t[r]||0===t[r])){var a=e[n],i=t[r];if("SPAN"===a.tagName){var s=/!\[([\s\S]*)\]\s*\(([\s\S]+)\)/.exec(i);if(s){var o=document.createElement("img");o.src=s[2],l.className(o,"etImg"),a.parentNode.insertBefore(o,a.parentNode.childNodes[0]),a.innerHTML=l.trim((s[1]||"").replace(/<br>|<div>|<\/div>/gi,"")),l.className(a,"imgTitle")}else{var u=";"+i+";";s=/;value=([^;]*);/.exec(u),s?a.innerHTML=s[1]||"":(s=/^~~(.*)~~/.exec(i),s?a.innerHTML="":a.innerHTML=i)}a.innerHTML=a.innerHTML.replace(/\r\n/g,"\n").replace(/[\r\n]/g,"<br>"),a.style.webkitUserModify="read-only"}else{var d=l.childTag(a.parentNode,"span");if("hidden"===a.type&&d){a.value=i,i=a.value.replace(/\r\n/g,"\n").replace(/[\r\n]/g,"<br>");var c=/!\[([\s\S]*)]\s*\(([\s\S]+)\)/.exec(i);if(c){var f=document.createElement("img");f.src=c[2],l.className(f,"etImg"),a.parentNode.insertBefore(f,a.parentNode.childNodes[0]),d.innerHTML=l.trim((c[1]||"").replace(/<br>|<div>|<\/div>/gi,""))||"~~点击输入标题~~",l.className(d,"imgTitle")}else d.innerHTML=i;this._editTx||(this._editTx=d)}else{var h=";"+i+";",g=/;type=([^;]+);/.exec(h);g&&(a.type=g[1]),g=/;pattern=([^;]+);/.exec(h),g&&(a.pattern=g[1]),g=/;placeholder=([^;]+);/.exec(h),g&&(a.placeholder=g[1]),g=/;readonly=([^;]+);/.exec(h),g&&a.setAttribute("readonly","readonly"),g=/;value=([^;]*);/.exec(h),g?a.value=g[1]||"":a.value=i,this._editTx||(this._editTx=a)}}}}}},{key:"addData",value:function(e,t,n,r){var a=0;try{var i=l.tags(e,"THEAD")[0],s=l.tags(e,"TBODY")[0],o=l.lastChild(i),u=!1,d=l.tags(o,"INPUT");d&&0!==d.length||(u=!0,d=l.tags(o,"SPAN")),d&&d.length>0&&this.setIdx(d,t);for(var c=null,f=0;f<n.length;f++){c=o.cloneNode(!0),c.style.display="",d=u?l.tags(c,"SPAN"):l.tags(c,"INPUT"),d&&d.length>0&&this.setVal(d,n[f]);var h=this.getNullRow(s),g=l.childCount(s);l.firstChild(l.firstChild(c)).nodeValue=g-h.cnt+1,(g-h.cnt)%2===1&&this.setRowClass(c,"etRowEven"),h.row?s.insertBefore(c,h.row):s.insertBefore(c,null),a=f+1}}catch(v){alert("addData exp:"+v.message)}return a}},{key:"addTxt",value:function(e,t){var n=null;try{var r=l.tags(e,"THEAD")[0],a=l.tags(e,"TBODY")[0],i=l.lastChild(r),s=i.cloneNode(!0);s.style.display="";var o=l.tags(s,"INPUT")[1];o.value=t;var u=l.childTag(o.parentNode,"span");u.innerHTML=t,s=a.insertBefore(s,this._editRow),this._editRow=s,this._editTx=l.tags(s,"span")||l.tags(s,"input"),this._editTx&&(this._editTx=this._editTx[0]),this._selRow=s,this._editCell=null,n=s}catch(d){alert("addTxt exp:"+d.message)}return n}},{key:"addImg",value:function(e,t,n){var r=null;try{var a=l.tags(e,"THEAD")[0],s=l.tags(e,"TBODY")[0],o=l.lastChild(a),u=o.cloneNode(!0);u.style.display="";var d=l.tags(u,"INPUT")[1];d.value=(0,i.format)("![%s](%s)",n||"",t);var c=l.childTag(d.parentNode,"span");c.innerHTML=n||"~~点击输入标题~~",l.className(c,"imgTitle");var f=document.createElement("img");f.src=t,l.className(f,"etImg"),d.parentNode.insertBefore(f,d.parentNode.childNodes[0]);var h=this._selRow||this._editRow;if(h=h&&h.nextSibling,u=s.insertBefore(u,h),this._editRow=u,this._editTx=l.tags(u,"span")||l.tags(u,"input"),this._editTx&&(this._editTx=this._editTx[0]),this._selRow=u,this._editCell=null,r=u,h){var g=l.tags(h,"span")[0];if(g){var v=g.innerHTML;v&&!/^[\s\n\r]+$/.exec(v)||(g.innerHTML="~~点击输入~~")}}else this.addRow(e,"~~点击输入~~");this._editTx.focus()}catch(p){alert("addImg exp:"+p.message)}return r}},{key:"getPosition",value:function(e){for(var t=e.offsetLeft,n=e.offsetTop,r=e.offsetParent;r;)t+=e.offsetLeft,n+=e.offsetTop,r=e.offsetParent;return{x:t,y:n}}},{key:"mouseOver",value:function(e){var t=e||window.event,n=t.srcElement||t.target;l.className(n,"etCellSelMouseOver")}},{key:"mouseOut",value:function(e){var t=e||window.event,n=t.srcElement?t.srcElement:t.target;l.className(n,"etCellSel")}},{key:"editMouseup",value:function(e){var t=e||window.event;t.preventDefault()}},{key:"showInput",value:function(e,t){var n=e;if(!t.getAttribute("show")||"1"!==t.getAttribute("show")){if(console.log("showInput:%s",n.tagName),t.setAttribute("show","1"),n&&"TD"===n.tagName&&(n=l.childTag(n,"span")),n.setAttribute("inputing","1"),this.editCell(n,t),"TEXTAREA"===t.tagName){var r=n.offsetHeight;r<n.parentNode.offsetHeight&&(r=n.parentNode.offsetHeight),t.style.height=r+"px",t.style.minHeight=r+"px",n.parentNode.insertBefore(t,n),n.style.display="none"}else{var a=this.getPosition(n),i=t.parentNode;i.style.top=("SPAN"===n.tagName?a.y:a.y+n.offsetHeight+2)+"px",i.style.left=a.x+"px",i.style.width=("SPAN"===n.tagName?n.offsetWidth:n.offsetWidth+2)+"px",i.style.display="",i.style.height=("SPAN"===n.tagName?n.offsetHeight:n.style.height)+"px"}var s="SPAN"===n.tagName?n.innerHTML:n.value;/^\*\*请/.exec(s)?t.value="":(s=s.replace(/<br>/g,"\n"),s=s.replace(/&gt;/g,">"),s=s.replace(/&lt;/g,"<"),s=s.replace(/&nbsp;/g," "),t.value=s+"\n"),t.style.textAlign=n.style.textAlign,t.style.fontSize=n.style.fontSize,t.style.zIndex="1000",t.focus()}}},{key:"hideInput",value:function(e,t){return e&&e.setAttribute("show","0"),"TEXTAREA"===e.tagName?(this._editCursorPos=this.getCursorPos(e),this._editTx.style.display="",this._editTx.parentNode.removeChild(e),t&&t.appendChild(e)):e.parentNode.style.display="none",!0}},{key:"changeInput",value:function(e){if(e){var t=e.value;if("SPAN"===this._editTx.tagName){var n=t.replace(/</g,"&lt;").replace(/>/g,"&gt;");n=n.replace(/\r\n/g,"\n").replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;"),n=n.replace(/\s+$/,""),this._editTx.innerHTML=n;var r=l.childTag(this._editTx.parentNode,"input");r&&(r.value=t)}else this._editTx.value=t}else{var a=l.childTag(this._editTx.parentNode,"input");a&&(a.value=this._editTx.value)}}},{key:"setInput",value:function(e,t){if("SPAN"===e.tagName){e.innerHTML=t.value;var n=l.tags(e.parentNode,"INPUT");n&&(n[0].value=t.value),t.parentNode.style.display="none",e.setAttribute("inputing","0")}else e.value=t.value,t.parentNode.style.display="none",e.setAttribute("inputing","0"),e.focus(),e.select()}},{key:"setOnlineEditCheckBox",value:function(e,t){for(var n=l.tags(e,"TBODY")[0],r=n.childNodes.length-1;r>=0;r--)n.childNodes[r].firstChild.firstChild.checked=t}},{key:"getCellIndex",value:function(e){var t=-1;if(!e)return-1;for(var n=e.parentNode.childNodes,r=0;r<n.length;r++){var a=n[r];if("TD"===a.nodeName.toUpperCase()){if(-1===t&&(t=0),e===a)break;t++}}return t}},{key:"setKeyDown",value:function(e){this._keyDown=e}},{key:"keyDown",value:function(e){var t=e||window.event,n=t.srcElement||t.target,r=t.keyCode||t.which||t.charCode,a=8,i=13;if("SPAN"===n.tagName)if(r===i&&"imgTitle"===n.className){var s=n.parentNode,o=s.parentNode,u=l.upperTag(o,"TABLE"),d=o.nextSibling;if(!d||l.tags(d,"img").length>0){var c=this.addRow(u,"",d);l.tags(c,"span")[0].focus()}else if(d){var f=l.tags(d,"span")[0];f&&l.cursorEnd(f)}t.preventDefault()}else if(r===a&&"SPAN"===n.tagName&&(!n.innerHTML||/(^(<br>)*$)|(^(\s)*$)/.exec(n.innerHTML))){var h=l.upperTag(n,"TABLE");this.deleteRow(h),t.preventDefault()}}},{key:"keyPress",value:function(e,t,n){var r=e||window.event,a=r.keyCode,i=r.srcElement||r.target,s=13;if("SPAN"===i.tagName){var o=l.upperTag(i,"TABLE");a===s&&"imgTitle"===i.className&&(r.stopPropagation&&r.stopPropagation(),r.cancelBubble=!0,r.keyCode=0,r.returnvalue=!1,this.addRow(o,"~~点击输入~~"))}return!1}},{key:"navigateKeys",value:function(e){var t=e||window.event,n=t.srcElement||t.target,r=t.keyCode||t.which||t.charCode;if("INPUT"!==n.tagName&&"SPAN"!==n.tagName)return void(46===r&&this._selRow&&this.deleteRow());var a=n.parentNode,i=a.parentNode,s=i.parentNode,o=s.parentNode,u=i.rowIndex,d=this.getCellIndex(a);switch(r){case 37:if(this.getCursorPos(n)>0)return;for(d--;"none"===o.rows[u].cells[d].style.display;)d>0&&d--;0===d&&(u--,d=i.cells.length-1),r=0;break;case 38:for(u--;"none"===o.rows[u].cells[d].style.display;)0!==u&&u--;r=0;break;case 39:if(this.getCursorPos(n)<n.value.length)return;for(d++;"none"===o.rows[u].cells[d].style.display;)0!==d&&d++;d>=i.cells.length&&(u++,d=2),r=0;break;case 40:for(u++;u<o.rows.length&&"none"===o.rows[u].cells[d].style.display;)u<o.rows.length&&u++;u>=o.rows.length&&(u=o.rows.length,this.addRow(o)),r=0;break;case 13:break;default:return}if(0===r&&(t.keyCode=0,window.event?(t.cancelBubble=!0,t.returnValue=!1):t.stopPropagation()),!(2>u||u>=o.rows.length||1>d||d>=i.cells.length)){var c=l.firstChild(o.rows[u].cells[d]);this.editCell(c)}}},{key:"cutTxt",value:function(e){var t="",n=e;if(!n&&this._editTx&&(n=this._editTx),!n)return"";if(window.getSelection()){var r=window.getSelection();if(r.rangeCount>0){for(var a=r.getRangeAt(0),i=a.startContainer,l=a.startOffset,s=[],o=0;o<n.childNodes.length;o++){var u=n.childNodes[o];if(i===u){3===u.nodeType?(t+=u.nodeValue.substr(0,l),u.nodeValue=u.nodeValue.substr(l)):(t+=u.innerHTML.substr(0,l),u.innerHTML=u.innerHTML.substr(l));break}n.childNodes.length>1&&(t+=3===u.nodeType?u.nodeValue:u.outerHTML,s.push(u))}for(var d=0;d<s.length;d++)n.removeChild(s[d])}}return t}}],[{key:"hi",value:function(e){alert(e)}}]),e}(),t["default"]=window.EditTable},function(e,t){"use strict";function n(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];var a=0,i=n.length,l=String(e).replace(/%[sdj%]/g,function(e){if("%%"===e)return"%";if(a>=i)return e;switch(e){case"%s":return String(n[a++]);case"%d":return Number(n[a++]);case"%j":return JSON.stringify(n[a++]);default:return e}});return l}function r(e){setTimeout(function(){document.title=e;var t=document.createElement("iframe");t.style.display="none",t.src="img/favicon.ico",t.onload=function(){setTimeout(function(){document.body.removeChild(t)},0)},document.body.appendChild(t)},0)}function a(e){var t=null,n="&"+location.search.substr(1)+"&",r=new RegExp("&"+e+"=([^&]*)&"),a=r.exec(n);return a&&(t=a[1],t=decodeURIComponent(t)),t}Object.defineProperty(t,"__esModule",{value:!0}),t.format=n,t.setTitle=r,t.urlParam=a},function(e,t,n){var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(a,i){r=function(){return i(a)}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}("undefined"!=typeof window?window:void 0,function(e){var t=function(){function t(e){return e in s?s[e]:s[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function n(e,t,n,r){return l.isFunction(t)?t.call(e,n,r):t}function r(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function i(e,t){this.selector=t||"",this[0]=this.dom=e,this.length=1,e||(this.length=0)}var l,s={},o={},u=/complete|loaded|interactive/,d={},c=d.toString,f=/^\s*<(\w+|!)[^>]*>/,h={},g={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};return document.ready=function(e){u.test(document.readyState)&&document.body?e():document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),e()},!1)},h.K=function(e,t){return new i(e,t)},h.isK=function(e){return e instanceof h.K},h.id=function(e){return e in o?o[e]:o[e]=h.K(document.getElementById(e),e)},h.fragment=function(e,t,n){},h.init=function(e,t){var n=void 0;if(!e)return h.Z();if("string"==typeof e){if("#"===e[0])return h.id(e.substr(1));"<"==e[0]&&f.test(e)?(n=h.fragment(e,RegExp.$1,t),e=null):n=l.qu(e,t)}else{if(h.isK(e))return e;l.isObject(e)&&(n=e,e=null)}return h.K(n,e)},l=function(e,t){return h.init(e,t)},l.K=i,l.knife=h,l.uuid=0,l.expr={},l.noop=function(){},l.type=function(e){return null==e?String(e):d[c.call(e)]||"object"},l.isFunction=function(e){return"function"==l.type(e)},l.isWindow=function(e){return null!=e&&e==e.window},l.isDocument=function(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE},l.isObject=function(e){return"object"==l.type(e)},l.isPlainObject=function(e){return isObject(e)&&!isWindow(e)&&Object.getPrototypeOf(e)==Object.prototype},l.isArray=Array.isArray||function(e){return e instanceof Array},l.isNumeric=function(e){var t=Number(e),n="undefined"==typeof e?"undefined":a(e);return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},l.trim=function(e){return null==e?"":String.prototype.trim.call(e)},l.support=function(){var t={touch:!!("ontouchstart"in e||e.DocumentTouch&&document instanceof e.DocumentTouch)};return t}(),l.touchEvents={start:l.support.touch?"touchstart":"mousedown",move:l.support.touch?"touchmove":"mousemove",end:l.support.touch?"touchend":"mouseup"},l.likeArray=function(e){var t=!!e&&"length"in e&&e.length,n=l.type(e);return"function"!=n&&!l.isWindow(e)&&("array"==n||0===t||"number"==typeof t&&t>0&&t-1 in e)},l.each=function(e,t){var n,r;if(l.likeArray(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},l.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){d["[object "+t+"]"]=t.toLowerCase()}),l.id=function(e){return document.getElementById(e)},l.qu=function(e,t){return t?h.isK(t)?t[0].querySelector(e):t.querySelector(e):document.querySelector(e)},l.qus=function(e,t){return t?h.isK(t)?t[0].querySelectorAll(e):t.querySelectorAll(e):document.querySelectorAll(e)},l.nms=function(e){return document.getElementsByName(e)},l.tags=function(e,t){return e=e||document,e.getElementsByTagName(t.toUpperCase())},l.dc=function(e,t,n){var r=document.createElement(t);return n&&(r.className=n),e.appendChild(r),r},l.html=function(e,t){if(void 0===t)return e?e.innerHTML:null;var r=e.innerHTML;e.innerHTML="",l(e).append(n(e,t,0,r))},l.attr=function(e,t,a){var i;if(!e)return"";if("string"==typeof t&&void 0===a)return e&&1==e.nodeType&&null!=(i=e.getAttribute(t))?i:"";if(1!==e.nodeType)return!1;if(isObject(t))for(key in t)r(e,key,t[key]);else r(e,t,n(e,a,0,e.getAttribute(t)));return!0},l.attrn=function(e,t){if(!e)return"";var n=e.getAttribute(t);return null==n&&(n=""),n&&(n=t+"="+n+";"),n},l.removeAttr=function(e,t){1===e.nodeType&&t.split(" ").forEach(function(t){r(e,t)})},l.prop=function(e,t,r){return t=g[t]||t,void 0!==r?(e[t]=n(e,r,0,e[t]),!0):e&&e[t]},l.removeProp=function(e,t){t=g[t]||t,delete e[t]},l.className=function(e,t){var n=(e.className||"").trim(),r=n&&void 0!==n.baseVal;return void 0===t?r?n.baseVal:n:void(r?n.baseVal=t:e.className=t)},l.hasClass=function(e,n){return e&&n?t(n).test(l.className(e)):!1},l.addClass=function(e,t){if(!e||!t)return!1;var r=[],a=l.className(e),i=n(e,t,0,a);return i.split(/\s+/g).forEach(function(t){l.hasClass(e,t)||r.push(t)}),r.length&&l.className(e,a+(a?" ":"")+r.join(" ")),!0},l.removeClass=function(e,r){if(void 0===r)return l.className(e,"");var a=l.className(e);n(e,r,0,a).split(/\s+/g).forEach(function(e){a=a.replace(t(e)," ")}),l.className(e,a.trim())},l.firstChild=function(e){var t=null;if(!e)return null;try{for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType||3===r.nodeType&&r.nodeValue&&r.nodeValue.trim()){t=r;break}}}catch(a){alert("firstChild exp:"+a.message)}return t},l.nextNode=function(e){var t=null;if(!e)return null;for(var n=e.nextSibling;n;){if(1===n.nodeType||3===n.nodeType&&n.nodeValue&&n.nodeValue.trim()){t=n;break}n=n.nextSibling}return t},l.lastChild=function(e){var t=null;if(!e)return null;for(var n=e.childNodes.length-1;n>=0;n--){var r=e.childNodes[n];if(1===r.nodeType||3===r.nodeType&&r.nodeValue&&r.nodeValue.trim()){t=r;break}}return t},l.childCount=function(e){var t=0;if(!e)return 0;for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];(1===r.nodeType||3===r.nodeType&&r.nodeValue&&r.nodeValue.trim())&&t++}return t},l.upperTag=function(e,t){for(var n=null,r=t.toUpperCase(),a=0,i=e;i&&(a++,!(a>=10));){if(i.tagName&&i.tagName===r){n=i;break}i=i.parentNode}return n},l.childTag=function(e,t){var n=null;if(!e)return null;try{for(var r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(a.tagName&&a.tagName===t.toUpperCase()){n=a;break}}}catch(i){alert("childTag exp:"+i.message)}return n},l.cursorEnd=function(t){if(t.focus(),"undefined"!=typeof e.getSelection&&"undefined"!=typeof document.createRange){var n=document.createRange();n.selectNodeContents(t),n.collapse(!1);var r=e.getSelection();r.removeAllRanges(),r.addRange(n)}else if("undefined"!=typeof document.body.createTextRangrge){var a=document.body.createTextRange();a.moveToElementText(t),a.collapse(!1),a.select()}},l.getCursorPos=function(e){var t=0;if(!e)return 0;if(e.selectionStart)t=e.selectionStart;else{var n=null;"textarea"===e.tagName.toLowerCase()?(n=event.srcElement.createTextRange(),n.moveToPoint(event.x,event.y)):n=document.selection.createRange(),n.moveStart("character",-event.srcElement.value.length),t=n.text.length}return t},l.getCursorPosition=function(e){var t="@#%#^&#*$",n=document.selection.createRange();n.text=t;var r=e.value.indexOf(t);return n.moveStart("character",-t.length),n.text="",r},l.setCursorPos=function(e,t){var n=e.createTextRange();n.collapse(!0),n.moveStart("character",t),n.select()},l.moveFirst=function(){this.rowindex=0},l}();return e.Knife=t,void 0===e.$&&(e.$=t),t})}]);